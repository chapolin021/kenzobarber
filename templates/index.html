{% extends 'base.html' %}
{% block title %}{{ ingresso.nome if ingresso else "Competição Senac 2025" }} — Inscrição{% endblock %}
{% set etapa = 2 %} {# <-- etapa 2=formulário #} {% block extra_styles %} <link rel="stylesheet"
    href="{{ url_for('static', filename='css/compSenac.css') }}">
    {% endblock %}

    {% block content %}
    <div class="container">
        <!-- COLUNA ESQUERDA -->
        <div class="left">
            <div class="panel">
                <h3>{{ ingresso.nome if ingresso else "Competição Senac 2025" }} - Inscrição</h3>

                <form id="formInscricao" class="inscricao-form">
                    <input type="hidden" id="ingresso_id" name="ingresso_id"
                        value="{{ ingresso.id if ingresso else 0 }}">

                    <label>Nome Completo *</label>
                    <input type="text" id="nome" required placeholder="Digite seu nome completo">

                    <div class="form-row">
                        <div class="col">
                            <label>CPF</label>
                            <input type="text" id="cpf" placeholder="000.000.000-00">
                        </div>
                        <div class="col">
                            <label>Telefone</label>
                            <input type="text" id="telefone" placeholder="(00) 00000-0000">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="col">
                            <label>Email *</label>
                            <input type="email" id="email" required placeholder="seu@email.com">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="col">
                            <label>Senha</label>
                            <input type="password" id="senha" placeholder="Insira sua senha">
                        </div>
                    </div>

                    <small class="muted" style="display:block; margin: 15px 0 5px;">INFORMAÇÕES ADICIONAIS</small>

                    <div class="form-row">
                        <div class="col">
                            <label>Unidade Curricular:</label>
                            <div class="radios">
                                <label class="radio-item"><input type="radio" name="origem" value="CEP Jessé Freire"
                                        required> CEP Jessé Freire (SCS)</label>
                                <label class="radio-item"><input type="radio" name="origem" value="CEP Jó Rufino"> CEP
                                    Jó Rufino e Carlos Aguiar (Taguatinga)</label>
                                <label class="radio-item"><input type="radio" name="origem" value="CEP Talal Abu-Allan">
                                    CEP Talal Abu-Allan (Ceilândia)</label>
                                <label class="radio-item"><input type="radio" name="origem" value="CEP Joaquim Loiola">
                                    CEP Joaquim Loiola (Gama)</label>
                                <label class="radio-item"><input type="radio" name="origem" value="CEP Antônio Matias">
                                    CEP Antônio Matias (903 Sul)</label>
                                <label class="radio-item"><input type="radio" name="origem" value="CEP Sobradinho"> CEP
                                    Sobradinho</label>
                            </div>
                        </div>
                    </div>

                    <div class="checkbox-row">
                        <input type="checkbox" id="aceito" required>
                        <label for="aceito">Li e aceito os Termos de Participação</label>
                    </div>

                    <div class="continue-wrap">
                        <button id="continuarBtn" type="submit" class="btn" disabled>Continuar</button>
                    </div>
                </form>


            </div>
        </div>

        <!-- COLUNA DIREITA -->
        <div class="right">
            <div class="event-card">
                <h2>{{ ingresso.nome if ingresso else "Evento" }}</h2>
                {% if ingresso and ingresso.data_evento %}
                <p>{{ ingresso.data_evento.strftime("%d/%m/%Y - %H:%M") }}</p>
                {% endif %}
                <p>{{ ingresso.local or "Local a definir" }}</p>
            </div>

            <div class="summary">
                <div class="summary-row">
                    <span>{{ ingresso.nome if ingresso else "Ingresso" }}</span>
                    <span>R$ {{ "%.2f"|format(ingresso.preco or 0) }}</span>
                </div>
                <div class="summary-row total">
                    <span>TOTAL:</span>
                    <span>R$ {{ "%.2f"|format(ingresso.preco or 0) }}</span>
                </div>
            </div>
        </div>
    </div>
    {% endblock %}

    {% block scripts %}
    <script>
        const INGRESSO_ID = {{ (ingresso_id if ingresso_id is defined else 0) | tojson }};
        const INSCRICAO_URL = {{ url_for('inscricao_bp.inscricao_api') | tojson }};
    </script>
    <script src="{{ url_for('static', filename='js/compSenac.js') }}"></script>
    {% endblock %}